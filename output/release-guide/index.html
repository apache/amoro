




























<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Release Guide</title>

    
    















<link href="/css/bootstrap.css" rel="stylesheet">


<link href="/css/markdown.css" rel="stylesheet">
<link href="/css/katex.min.css" rel="stylesheet">





<link href="/css/amoro-theme.css" rel="stylesheet">


<link href="/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">


<link href="/css/termynal.css" rel="stylesheet">

<link href="/css/home-page.css" rel="stylesheet">


    
    
    

</head>
<body>

<head>
    <script>
        
        function addAnchor(element) {
            element.insertAdjacentHTML('beforeend', `<a href="#${element.id}" class="anchortag" ariaLabel="Anchor"> ğŸ”— </a>` )
        }
        document.addEventListener('DOMContentLoaded', function () {
            var headers = document.querySelectorAll('h1[id], h2[id], h3[id], h4[id]')
            if (headers) {
                headers.forEach(addAnchor)
            }
        });
    </script>
</head>















    <nav class="navbar navbar-default" role="navigation">
        <topsection>
            <div class="navbar-fixed-top">
                <div>
                <a class="page-scroll navbar-brand" href="https://amoro.apache.org/"><img class="top-navbar-logo" src="https://amoro.apache.org//img/amoro-logo-icon.png"/></a>
                </div>
            </div>
            <div class="navbar-menu-fixed-top navbar-pages-group">
                
                
                
                
                
                    <div class="topnav-page-selection">
                        <a   href="/quick-start/">Quickstart</a>
                    </div class="topnav-page-selection">
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">Docs</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/latest/">latest</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/0.8.1/">0.8.1-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/0.8.0/">0.8.0-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/0.7.1/">0.7.1-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/0.7.0/">0.7.0-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/0.6.1/">0.6.1</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">Benchmark</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a   href="/benchmark-report/">Benchmark Report</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/benchmark-guide/">Benchmark Guide</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                
                
                    <div class="topnav-page-selection">
                        <a   href="/download/">Download</a>
                    </div class="topnav-page-selection">
                
                
                
                
                    <div class="topnav-page-selection">
                        <a   href="/blogs/">Blogs</a>
                    </div class="topnav-page-selection">
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">Community</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a   href="/join-community/">Join Community</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/how-to-contribute/">How to contribute</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/release-guide/">Release guide</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/validate-release/">Validate release</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">ASF</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/">Foundation</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/licenses/">License</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/foundation/sponsorship.html">Donate</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/foundation/thanks.html">Sponsors</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/security/">Security</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                <div class="topnav-page-selection">
                    <a href="https://github.com/apache/incubator-amoro" target="_blank">
                        <img src="https://amoro.apache.org//img/GitHub-Mark.png" target="_blank" class="top-navbar-logo"/>
                    </a>
                </div>
            </div>
            </topsection>
    </nav>

<body dir=" ltr">
    <section>
        <div class="grid-container toc-only">
            
            <div id="content" class="markdown-body">
                <div class="margin-for-toc"><h1 id="how-to-release-a-new-version">How to release a new version</h1>
<h2 id="preparation">Preparation</h2>
<h3 id="apache-release-documentation">Apache release documentation</h3>
<p>Please refer to the following link to understand the ASF release process:</p>
<ul>
<li><a href="http://www.apache.org/dev/release-publishing">Apache Release Guide</a></li>
<li><a href="http://www.apache.org/dev/release.html">Apache Release Policy</a></li>
<li><a href="http://www.apache.org/dev/publishing-maven-artifacts.html">Publishing Maven Artifacts</a></li>
</ul>
<h3 id="environmental-requirements">Environmental requirements</h3>
<ul>
<li>JDK 11</li>
<li>Apache Maven 3.8+</li>
<li>GnuPG 2.1+</li>
<li>Git</li>
<li>SVN</li>
</ul>
<h3 id="gpg-signature">GPG signature</h3>
<p>Follow the Apache release guidelines, you need the GPG signature to sign the release version, users can also use this to determine if the downloaded version has been tampered with.</p>
<p>Create a pgp key for version signing, use <code>&lt;your Apache ID&gt;@apache.org</code> as the USER-ID for the key.</p>
<p>For more details, refer to <a href="https://infra.apache.org/release-signing">Apache Releases Signing documentation</a>ï¼Œ<a href="http://www.apache.org/dev/openpgp.html">Cryptography with OpenPGP</a>.</p>
<p>Brief process for generating a keyï¼š</p>
<ul>
<li>Generate a new GPG key using <code>gpg --gen-key</code>, set the key length to 4096 and set it to never expire</li>
<li>Upload the key to the public key server using <code>gpg --keyserver keys.openpgp.org --send-key &lt;your key id&gt;</code></li>
<li>Export the public key to a text file using <code>gpg --armor --export &lt;your key id&gt; &gt;&gt; gpgapachekey.txt</code></li>
<li>Obtain the keys of other committers for signing (optional)</li>
<li>Add the generated key to the KEYS file (uploaded to the svn repository by the release manager)</li>
</ul>
<p>You can follow the steps below to create the GPG key:</p>
<div class="info">
    You should replace <code>amoro</code> with your <code>Apache ID</code> in following guides.
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gpg --full-gen-key
</span></span><span style="display:flex;"><span>gpg <span style="color:#f92672">(</span>GnuPG<span style="color:#f92672">)</span> 2.2.27; Copyright <span style="color:#f92672">(</span>C<span style="color:#f92672">)</span> <span style="color:#ae81ff">2021</span> Free Software Foundation, Inc.
</span></span><span style="display:flex;"><span>This is free software: you are free to change and redistribute it.
</span></span><span style="display:flex;"><span>There is NO WARRANTY, to the extent permitted by law.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Please <span style="color:#66d9ef">select</span> what kind of key you want:
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>1<span style="color:#f92672">)</span> RSA and RSA <span style="color:#f92672">(</span>default<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>2<span style="color:#f92672">)</span> DSA and Elgamal
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>3<span style="color:#f92672">)</span> DSA <span style="color:#f92672">(</span>sign only<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>4<span style="color:#f92672">)</span> RSA <span style="color:#f92672">(</span>sign only<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>14<span style="color:#f92672">)</span> Existing key from card
</span></span><span style="display:flex;"><span>Your selection? <span style="color:#ae81ff">1</span> <span style="color:#75715e"># Please enter 1</span>
</span></span><span style="display:flex;"><span>RSA keys may be between <span style="color:#ae81ff">1024</span> and <span style="color:#ae81ff">4096</span> bits long.
</span></span><span style="display:flex;"><span>What keysize <span style="color:#66d9ef">do</span> you want? <span style="color:#f92672">(</span>3072<span style="color:#f92672">)</span> <span style="color:#ae81ff">4096</span> <span style="color:#75715e"># Please enter 4096 here</span>
</span></span><span style="display:flex;"><span>Requested keysize is <span style="color:#ae81ff">4096</span> bits
</span></span><span style="display:flex;"><span>Please specify how long the key should be valid.
</span></span><span style="display:flex;"><span>0 <span style="color:#f92672">=</span> key does not expire
</span></span><span style="display:flex;"><span>&lt;n&gt; <span style="color:#f92672">=</span> key expires in n days
</span></span><span style="display:flex;"><span>&lt;n&gt;w <span style="color:#f92672">=</span> key expires in n weeks
</span></span><span style="display:flex;"><span>&lt;n&gt;m <span style="color:#f92672">=</span> key expires in n months
</span></span><span style="display:flex;"><span>&lt;n&gt;y <span style="color:#f92672">=</span> key expires in n years
</span></span><span style="display:flex;"><span>Key is valid <span style="color:#66d9ef">for</span>? <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e"># Please enter 0</span>
</span></span><span style="display:flex;"><span>Key does not expire at all
</span></span><span style="display:flex;"><span>Is this correct? <span style="color:#f92672">(</span>y/N<span style="color:#f92672">)</span> y <span style="color:#75715e"># Please enter y here</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>GnuPG needs to construct a user ID to identify your key.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Real name: amoro <span style="color:#75715e"># Please enter &#39;gpg real name&#39;</span>
</span></span><span style="display:flex;"><span>Email address: amoro@apache.org <span style="color:#75715e"># Please enter your apache email address here</span>
</span></span><span style="display:flex;"><span>Comment: amoro <span style="color:#75715e"># Please enter some comments here</span>
</span></span><span style="display:flex;"><span>You selected this USER-ID:
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;amoro (amoro) &lt;amoro@apache.org&gt;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Change <span style="color:#f92672">(</span>N<span style="color:#f92672">)</span>ame, <span style="color:#f92672">(</span>C<span style="color:#f92672">)</span>omment, <span style="color:#f92672">(</span>E<span style="color:#f92672">)</span>mail or <span style="color:#f92672">(</span>O<span style="color:#f92672">)</span>kay/<span style="color:#f92672">(</span>Q<span style="color:#f92672">)</span>uit? O <span style="color:#75715e"># Please enter O here</span>
</span></span><span style="display:flex;"><span>We need to generate a lot of random bytes. It is a good idea to perform
</span></span><span style="display:flex;"><span>some other action <span style="color:#f92672">(</span>type on the keyboard, move the mouse, utilize the
</span></span><span style="display:flex;"><span>disks<span style="color:#f92672">)</span> during the prime generation; this gives the random number
</span></span><span style="display:flex;"><span>generator a better chance to gain enough entropy.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># At this time, a dialog box will pop up, asking you to enter the key for this gpg. </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># you need to remember that it will be used in subsequent steps.</span>
</span></span><span style="display:flex;"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>â”‚ Please enter this passphrase to                     â”‚
</span></span><span style="display:flex;"><span>â”‚ protect your new key                                â”‚
</span></span><span style="display:flex;"><span>â”‚                                                     â”‚
</span></span><span style="display:flex;"><span>â”‚ Passphrase: _______________________________________ â”‚
</span></span><span style="display:flex;"><span>â”‚                                                     â”‚
</span></span><span style="display:flex;"><span>â”‚     &lt;OK&gt;                    &lt;Cancel&gt;                â”‚
</span></span><span style="display:flex;"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Here you need to re-enter the password in the previous step.</span>
</span></span><span style="display:flex;"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>â”‚ Please re-enter this passphrase                     â”‚
</span></span><span style="display:flex;"><span>â”‚                                                     â”‚
</span></span><span style="display:flex;"><span>â”‚ Passphrase: _______________________________________ â”‚
</span></span><span style="display:flex;"><span>â”‚                                                     â”‚
</span></span><span style="display:flex;"><span>â”‚     &lt;OK&gt;                    &lt;Cancel&gt;                â”‚
</span></span><span style="display:flex;"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>gpg: key ACFB69E705016886 marked as ultimately trusted
</span></span><span style="display:flex;"><span>gpg: revocation certificate stored as <span style="color:#e6db74">&#39;/root/.gnupg/openpgp-revocs.d/DC12398CCC33A5349EB9663DF9D970AB18C9EDF6.rev&#39;</span>
</span></span><span style="display:flex;"><span>public and secret key created and signed.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pub   rsa4096 2023-05-01 <span style="color:#f92672">[</span>SC<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>      85778A4CE4DD04B7E07813ABACFB69E705016886
</span></span><span style="display:flex;"><span>uid                      amoro <span style="color:#f92672">(</span>amoro<span style="color:#f92672">)</span> &lt;amoro@apache.org&gt;
</span></span><span style="display:flex;"><span>sub   rsa4096 2023-05-01 <span style="color:#f92672">[</span>E<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Then you can follow the steps below to upload the GPG key to the public server:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gpg --keyid-format SHORT --list-keys
</span></span><span style="display:flex;"><span>/root/.gnupg/pubring.kbx
</span></span><span style="display:flex;"><span>------------------------
</span></span><span style="display:flex;"><span>pub   rsa4096/05016886 2023-05-01 <span style="color:#f92672">[</span>SC<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>      85778A4CE4DD04B7E07813ABACFB69E705016886
</span></span><span style="display:flex;"><span>uid         <span style="color:#f92672">[</span>ultimate<span style="color:#f92672">]</span> amoro <span style="color:#f92672">(</span>amoro<span style="color:#f92672">)</span> &lt;amoro@apache.org&gt;
</span></span><span style="display:flex;"><span>sub   rsa4096/0C5A4E1C 2023-05-01 <span style="color:#f92672">[</span>E<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Send public key to keyserver via key id</span>
</span></span><span style="display:flex;"><span>$ gpg --keyserver keyserver.ubuntu.com --send-key <span style="color:#ae81ff">05016886</span> <span style="color:#75715e"># send key should be found in the --list-keys result</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Among them, keyserver.ubuntu.com is the selected keyserver, it is recommended to use this, because the Apache Nexus verification uses this keyserver</span>
</span></span></code></pre></div><p>Check if the key is uploaded successfully:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gpg --keyserver keyserver.ubuntu.com --recv-keys <span style="color:#ae81ff">05016886</span>   <span style="color:#75715e"># If the following content appears, it means success</span>
</span></span><span style="display:flex;"><span>gpg: key ACFB69E705016886: <span style="color:#e6db74">&#34;amoro (amoro) &lt;amoro@apache.org&gt;&#34;</span> not changed
</span></span><span style="display:flex;"><span>gpg: Total number processed: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>gpg:              unchanged: <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>Add the GPG public key to the KEYS file of the Apache SVN project warehouse:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Add public key to KEYS in dev branch</span>
</span></span><span style="display:flex;"><span>$ mkdir -p ~/amoro_svn/dev
</span></span><span style="display:flex;"><span>$ cd ~/amoro_svn/dev
</span></span><span style="display:flex;"><span>$ svn co https://dist.apache.org/repos/dist/dev/incubator/amoro
</span></span><span style="display:flex;"><span>$ cd ~/amoro_svn/dev/amoro
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Append the KEY you generated to the file KEYS, and check if it is added correctly</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#f92672">(</span>gpg --list-sigs amoro@apache.org <span style="color:#f92672">&amp;&amp;</span> gpg --export --armor amoro@apache.org<span style="color:#f92672">)</span> &gt;&gt; KEYS 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ svn ci -m <span style="color:#e6db74">&#34;add gpg key for amoro&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add public key to KEYS in release branch</span>
</span></span><span style="display:flex;"><span>$ mkdir -p ~/amoro_svn/release
</span></span><span style="display:flex;"><span>$ cd ~/amoro_svn/release
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ svn co https://dist.apache.org/repos/dist/release/incubator/amoro/
</span></span><span style="display:flex;"><span>$ cd ~/amoro_svn/release/amoro
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Append the KEY you generated to the file KEYS, and check if it is added correctly</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#f92672">(</span>gpg --list-sigs amoro@apache.org <span style="color:#f92672">&amp;&amp;</span> gpg --export --armor amoro@apache.org<span style="color:#f92672">)</span> &gt;&gt; KEYS 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ svn ci -m <span style="color:#e6db74">&#34;add gpg key for amoro&#34;</span>
</span></span></code></pre></div><h3 id="maven-settings">Maven settings</h3>
<p>During the release process, frequent access to your Apache password is required. To prevent exposure in plaintext storage, we need to encrypt it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Generate master password</span>
</span></span><span style="display:flex;"><span>$ mvn --encrypt-master-password &lt;apache password&gt;
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>EM+4/TYVDXYHRbkwjjAS3mE1RhRJXJUSG8aIO5RSxuHU26rKCjuS2vG+/wMjz9te<span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Create the file <code>${user.home}/.m2/settings-security.xml</code> and configure the password created in the previous step:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;settingsSecurity&gt;</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&lt;master&gt;</span>{EM+4/TYVDXYHRbkwjjAS3mE1RhRJXJUSG8aIO5RSxuHU26rKCjuS2vG+/wMjz9te}<span style="color:#f92672">&lt;/master&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/settingsSecurity&gt;</span>
</span></span></code></pre></div><p>In the maven configuration file <code>~/.m2/settings.xml</code>, add the following item:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;settings</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://maven.apache.org/SETTINGS/1.0.0&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;servers&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;server&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;id&gt;</span>apache.snapshots.https<span style="color:#f92672">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- APACHE LDAP UserName --&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;username&gt;</span>amoro<span style="color:#f92672">&lt;/username&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- APACHE LDAP password (Fill in the password you just created with the command `mvn --encrypt-password &lt;apache passphrase&gt;`) --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;password&gt;</span>{/ZLaH78TWboH5IRqNv9pgU4uamuqm9fCIbw0gRWT01c=}<span style="color:#f92672">&lt;/password&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/server&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;server&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;id&gt;</span>apache.releases.https<span style="color:#f92672">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- APACHE LDAP UserName --&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;username&gt;</span>amoro<span style="color:#f92672">&lt;/username&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- APACHE LDAP password (Fill in the password you just created with the command `mvn --encrypt-password &lt;apache passphrase&gt;`) --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;password&gt;</span>{/ZLaH78TWboH5IRqNv9pgU4uamuqm9fCIbw0gRWT01c=}<span style="color:#f92672">&lt;/password&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/server&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/servers&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;profiles&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;profile&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;id&gt;</span>apache-release<span style="color:#f92672">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;properties&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;gpg.keyname&gt;</span>05016886<span style="color:#f92672">&lt;/gpg.keyname&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">&lt;!-- Use an agent: Prevents being asked for the password during the build --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;gpg.useagent&gt;</span>true<span style="color:#f92672">&lt;/gpg.useagent&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;gpg.passphrase&gt;</span>passphrase for your gpg key<span style="color:#f92672">&lt;/gpg.passphrase&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;/properties&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/profile&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/profiles&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/settings&gt;</span>
</span></span></code></pre></div><p>Generate the final encrypted password and add it to the <code>~/.m2/settings.xml</code> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mvn --encrypt-password &lt;apache password&gt;
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>/ZLaH78TWboH5IRqNv9pgU4uamuqm9fCIbw0gRWT01c<span style="color:#f92672">=}</span>
</span></span></code></pre></div><h2 id="build-release">Build release</h2>
<h3 id="cut-the-release-branch">Cut the release branch</h3>
<blockquote>
<p>The version of Apache Amoro follows the <a href="https://semver.org/">Semantic Versioning</a>, which looks like <code>{major}.{mior}.{patch}</code></p>
</blockquote>
<p>Cut a branch for the <code>minor</code> version if it is not created in the Apache remote repository, if it already exists, check it out and pull the latest changes.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd <span style="color:#e6db74">${</span>AMORO_SOURCE_HOME<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Cut the release branch if it is not created, then push to the remote </span>
</span></span><span style="display:flex;"><span>$ git checkout -b 0.8.x
</span></span><span style="display:flex;"><span>$ git push apache 0.8.x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Or check it out and pull the latest changes if it is created</span>
</span></span><span style="display:flex;"><span>$ git checkout 0.8.x
</span></span><span style="display:flex;"><span>$ git pull apache 0.8.x
</span></span></code></pre></div><p>Checkout a <code>patch</code> branch using the following command</p>
<pre tabindex="0"><code>$ git checkout -b 0.8.0-branch
</code></pre><p>Update the version in the new branch using the tool <code>tools/change-version.sh</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>OLD<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0.8-SNAPSHOT&#34;</span>
</span></span><span style="display:flex;"><span>NEW<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0.8.0-incubating&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>HERE<span style="color:#f92672">=</span><span style="color:#e6db74">`</span> basename <span style="color:#e6db74">&#34;</span>$PWD<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34;</span>$HERE<span style="color:#e6db74">&#34;</span> !<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tools&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Please only execute in the tools/ directory&#34;</span>;
</span></span><span style="display:flex;"><span>    exit 1;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># change version in all pom files</span>
</span></span><span style="display:flex;"><span>find .. -name <span style="color:#e6db74">&#39;pom.xml&#39;</span> -type f -exec perl -pi -e <span style="color:#e6db74">&#39;s#&lt;version&gt;&#39;</span><span style="color:#e6db74">&#34;</span>$OLD<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">&#39;&lt;/version&gt;#&lt;version&gt;&#39;</span><span style="color:#e6db74">&#34;</span>$NEW<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">&#39;&lt;/version&gt;#&#39;</span> <span style="color:#f92672">{}</span> <span style="color:#ae81ff">\;</span>
</span></span></code></pre></div><p>Then run the scripts and commit the change:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd tools
</span></span><span style="display:flex;"><span>$ bash change-version.sh
</span></span><span style="display:flex;"><span>$ cd ..
</span></span><span style="display:flex;"><span>$ git add *
</span></span><span style="display:flex;"><span>$ git commit -m <span style="color:#e6db74">&#34;Change project version to 0.8.0-incubating&#34;</span>
</span></span><span style="display:flex;"><span>$ git push apache 0.8.0-branch
</span></span></code></pre></div><h3 id="create-the-release-tag">Create the release tag</h3>
<p>Create the release tag and push it to the Apache repo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git tag -a v0.8.0-rc1 -m <span style="color:#e6db74">&#34;Release Apache Amoro 0.8.0 rc1&#34;</span>
</span></span><span style="display:flex;"><span>$ git push apache v0.8.0-rc1
</span></span></code></pre></div><h3 id="build-binary-and-source-release">Build binary and source release</h3>
<p>Build Amoro binary release with scripts:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd <span style="color:#e6db74">${</span>AMORO_SOURCE_HOME<span style="color:#e6db74">}</span>/tools
</span></span><span style="display:flex;"><span>$ RELEASE_VERSION<span style="color:#f92672">=</span>0.8.0-incubating bash ./releasing/create_binary_release.sh
</span></span></code></pre></div><p>Then build source release with scripts:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd <span style="color:#e6db74">${</span>AMORO_SOURCE_HOME<span style="color:#e6db74">}</span>/tools
</span></span><span style="display:flex;"><span>$ RELEASE_VERSION<span style="color:#f92672">=</span>0.8.0-incubating bash ./releasing/create_source_release.sh
</span></span></code></pre></div><p>Validate the source and binary packages according to the <a href="../validate-release/">How to validate a new release</a> guides.
After that, publish the dev directory of the Apache SVN warehouse of the material package:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd ~/amoro_svn/dev/amoro
</span></span><span style="display:flex;"><span>$ mkdir 0.8.0-incubating-RC1
</span></span><span style="display:flex;"><span>$ cp <span style="color:#e6db74">${</span>AMORO_SOURCE_HOME<span style="color:#e6db74">}</span>/tools/releasing/release/* 0.8.0-incubating-RC1
</span></span><span style="display:flex;"><span>$ svn add 0.8.0-incubating-RC1
</span></span><span style="display:flex;"><span>$ svn commit -m <span style="color:#e6db74">&#34;Release Apache Amoro 0.8.0 rc1&#34;</span>
</span></span></code></pre></div><h3 id="release-apache-nexus">Release Apache Nexus</h3>
<p>Next, we will publish the required JAR files to the â€‹Apache Nexusâ€‹ repository to achieve the final goal of releasing them to the â€‹Maven Central Repository.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd <span style="color:#e6db74">${</span>$AMORO_SOURCE_HOME<span style="color:#e6db74">}</span>/tools
</span></span><span style="display:flex;"><span>$ RELEASE_VERSION<span style="color:#f92672">=</span>0.8.0-incubating bash ./releasing/deploy_staging_jars.sh
</span></span></code></pre></div><p>You can visit <a href="https://repository.apache.org/">https://repository.apache.org/</a> and log in to check the publishment status. You can find the publishment process in the <code>Staging Repositories</code> section. You need to close the process when all jars are publised.</p>
<h2 id="vote-for-the-new-release">Vote for the new release</h2>
<p>Next, vote for the new release via email. First complete the vote within the Amoro community, and upon approval, complete the vote within the Amoro community in the Incubator community. For detailed voting guidelines, please refer to <a href="https://www.apache.org/foundation/voting.html">voting process</a>.</p>
<h3 id="vote-in-the-amoro-community">Vote in the Amoro community</h3>
<p>Send a vote email to <code>dev@amoro.apache.org</code> to start the vote process in Apache Amoro community, you can take <a href="https://lists.apache.org/thread/22rrpzwtzkby8vnhfvcwzmpfxxz8qhns">[VOTE] Release Apache Amoro(incubating) 0.8.0-incubating rc3</a> as an example.</p>
<p>You can validate the source and binary packages according to the <a href="../validate-release/">How to validate a new release</a> guides and give your vote resulut. If other developers identify critical issues, you need to cancel the current vote, wait for the fixes to be implemented, and then restart the release process with a new release candidate.</p>
<p>After 72 hours, if there are at least 3 binding votes from Amoro PPMC members and no votes against, send the result email to celebrate the release of the version like <a href="https://lists.apache.org/thread/gokj30ldgh3p5866tw40h41mhdw90whs">[RESULT][VOTE] Release Apache Amoro(incubating) 0.8.0-incubating rc3</a>.</p>
<h3 id="vote-in-the-incubator-community">Vote in the Incubator community</h3>
<blockquote>
<p>We recommend to use gmail when sending the email.</p>
</blockquote>
<p>Send a vote email to <code>general@incubator.apache.org</code> to start the vote process in Apache Incubator community, you can take <a href="https://lists.apache.org/thread/bqj7gohrjwxp5gwycdgh78xmpymfm6jr">[VOTE] Release Apache Amoro(incubating) 0.8.0-incubating rc3</a> as an example.</p>
<p>After 72 hours, if there are at least 3 binding votes from IPMC members and no votes against, send the result email to celebrate the release of the version like <a href="https://lists.apache.org/thread/qmvg3tcds0p0pbn05w0mzchm85o581rv">[RESULT][VOTE] Release Apache Amoro(incubating) 0.8.0-incubating rc3</a>.</p>
<h2 id="complete-the-final-publishing-steps">Complete the final publishing steps</h2>
<h3 id="migrate-source-and-binary-packages">Migrate source and binary packages</h3>
<p>Migrate the source and binary packages to the release directory of the Apache SVN warehouse:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ svn mv https://dist.apache.org/repos/dist/dev/incubator/amoro/0.8.0-incubating-RC1 https://dist.apache.org/repos/dist/release/incubator/amoro/0.8.0-incubating  -m <span style="color:#e6db74">&#34;Release Apache Amoro 0.8.0-incubating&#34;</span>
</span></span></code></pre></div><h3 id="publish-releases-in-the-apache-staging-repository">Publish releases in the Apache Staging repository</h3>
<ul>
<li>Log in to <a href="http://repository.apache.org">http://repository.apache.org</a> , log in with your Apache account</li>
<li>Click Staging repositories on the left</li>
<li>Select your most recently uploaded warehouse, the warehouse specified in the voting email</li>
<li>Click the Release button above, this process will perform a series of checks</li>
</ul>
<blockquote>
<p>It usually takes 24 hours for the warehouse to synchronize to other data sources</p>
</blockquote>
<h3 id="add-release-note-and-update-the-main-web">Add release note and update the main web</h3>
<ul>
<li>Creating an <a href="https://github.com/apache/amoro/releases">new release note</a> in github</li>
<li>Update the content for the new version for the web, the source locates in <a href="https://github.com/apache/amoro-site">amoro-site</a> repo
<ul>
<li>First, submit a pull request containing the new version. You can refer to <a href="https://github.com/apache/amoro-site/commit/598787c97898bb6431686e9cf6dd37f89ce2a339">this commit</a>. Note that the <code>$version</code> in the &ldquo;url = &ldquo;/docs/$version/&rdquo; URL in hugo.toml corresponds to the branch name will be created in the following step in amoro-site</li>
<li>After merging the pull request from step 1, pull a local branch named <code>$version</code> and push it remotely</li>
<li>Check that the <a href="https://github.com/apache/amoro-site/actions/workflows/deploy.yml">GithubAction</a> for branch <code>$version</code> is executed successfully</li>
</ul>
</li>
</ul>
<h3 id="send-announcement-email">Send announcement email</h3>
<p>Finally, we need to send the announcement email to these mailing lists: <code>dev@amoro.apache.org</code>, <code>general@incubator.apache.org</code>. Here is an example of an announcement email:  <a href="https://lists.apache.org/thread/h3cy8f2mfmp4zms4cs3tq4hdlq64qyw0">[ANNOUNCE] Apache Amoro (Incubating) 0.8.0-incubating available</a>.</p>
<p>Congratulations! You have successfully completed all steps of the Apache Amoro release process. Thank you for your contributions!</p>
</div>
                
                    














<div id="toc" class="markdown-body">
    <div id="full">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#preparation">Preparation</a>
      <ul>
        <li><a href="#apache-release-documentation">Apache release documentation</a></li>
        <li><a href="#environmental-requirements">Environmental requirements</a></li>
        <li><a href="#gpg-signature">GPG signature</a></li>
        <li><a href="#maven-settings">Maven settings</a></li>
      </ul>
    </li>
    <li><a href="#build-release">Build release</a>
      <ul>
        <li><a href="#cut-the-release-branch">Cut the release branch</a></li>
        <li><a href="#create-the-release-tag">Create the release tag</a></li>
        <li><a href="#build-binary-and-source-release">Build binary and source release</a></li>
        <li><a href="#release-apache-nexus">Release Apache Nexus</a></li>
      </ul>
    </li>
    <li><a href="#vote-for-the-new-release">Vote for the new release</a>
      <ul>
        <li><a href="#vote-in-the-amoro-community">Vote in the Amoro community</a></li>
        <li><a href="#vote-in-the-incubator-community">Vote in the Incubator community</a></li>
      </ul>
    </li>
    <li><a href="#complete-the-final-publishing-steps">Complete the final publishing steps</a>
      <ul>
        <li><a href="#migrate-source-and-binary-packages">Migrate source and binary packages</a></li>
        <li><a href="#publish-releases-in-the-apache-staging-repository">Publish releases in the Apache Staging repository</a></li>
        <li><a href="#add-release-note-and-update-the-main-web">Add release note and update the main web</a></li>
        <li><a href="#send-announcement-email">Send announcement email</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
            </div>
        </div>
    </section>
</body>















<script src="https://amoro.apache.org//js/jquery-1.11.0.js"></script>


<script src="https://amoro.apache.org//js/jquery.easing.min.js"></script>


<script type="text/javascript" src="https://amoro.apache.org//js/search.js"></script>


<script src="https://amoro.apache.org//js/bootstrap.min.js"></script>


<script src="https://amoro.apache.org//js/iceberg-theme.js"></script>



</html>