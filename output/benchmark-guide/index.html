




























<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>How To Benchmark</title>

    
    















<link href="/css/bootstrap.css" rel="stylesheet">


<link href="/css/markdown.css" rel="stylesheet">
<link href="/css/katex.min.css" rel="stylesheet">





<link href="/css/amoro-theme.css" rel="stylesheet">


<link href="/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">


<link href="/css/termynal.css" rel="stylesheet">

<link href="/css/home-page.css" rel="stylesheet">


    
    
    

</head>
<body>

<head>
    <script>
        
        function addAnchor(element) {
            element.insertAdjacentHTML('beforeend', `<a href="#${element.id}" class="anchortag" ariaLabel="Anchor"> ðŸ”— </a>` )
        }
        document.addEventListener('DOMContentLoaded', function () {
            var headers = document.querySelectorAll('h1[id], h2[id], h3[id], h4[id]')
            if (headers) {
                headers.forEach(addAnchor)
            }
        });
    </script>
</head>















    <nav class="navbar navbar-default" role="navigation">
        <topsection>
            <div class="navbar-fixed-top">
                <div>
                <a class="page-scroll navbar-brand" href="https://amoro.apache.org/"><img class="top-navbar-logo" src="https://amoro.apache.org//img/amoro-logo-icon.png"/></a>
                </div>
            </div>
            <div class="navbar-menu-fixed-top navbar-pages-group">
                
                
                
                
                
                    <div class="topnav-page-selection">
                        <a   href="/quick-start/">Quickstart</a>
                    </div class="topnav-page-selection">
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">Docs</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/latest/">latest</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/0.8.1/">0.8.1-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/0.8.0/">0.8.0-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/0.7.1/">0.7.1-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/0.7.0/">0.7.0-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/docs/0.6.1/">0.6.1</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">Benchmark</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a   href="/benchmark-report/">Benchmark Report</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/benchmark-guide/">Benchmark Guide</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                
                
                    <div class="topnav-page-selection">
                        <a   href="/download/">Download</a>
                    </div class="topnav-page-selection">
                
                
                
                
                    <div class="topnav-page-selection">
                        <a   href="/blogs/">Blogs</a>
                    </div class="topnav-page-selection">
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">Community</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a   href="/join-community/">Join Community</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/how-to-contribute/">How to contribute</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/release-guide/">Release guide</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="/validate-release/">Validate release</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">ASF</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/">Foundation</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/licenses/">License</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/foundation/sponsorship.html">Donate</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/foundation/thanks.html">Sponsors</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/security/">Security</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                <div class="topnav-page-selection">
                    <a href="https://github.com/apache/incubator-amoro" target="_blank">
                        <img src="https://amoro.apache.org//img/GitHub-Mark.png" target="_blank" class="top-navbar-logo"/>
                    </a>
                </div>
            </div>
            </topsection>
    </nav>

<body dir=" ltr">
    <section>
        <div class="grid-container toc-only">
            
            <div id="content" class="markdown-body">
                <div class="margin-for-toc"><h1 id="benchmark-guild">Benchmark Guild</h1>
<p>This guilde introduces detailed steps for executing the benchmark to validate performance of various data lake formats.</p>
<p>By following the steps in the guild, you can learn about the analytical performance of different data lake table format. At the same time, you can flexibly adjust the test scenarios to obtain test results that better suit your actual scenario.</p>
<h2 id="deploy-testing-environment">Deploy testing environment</h2>
<h3 id="deploy-by-docker">Deploy by Docker</h3>
<p>With <a href="https://docs.docker.com/compose/">Docker-Compose</a>, you can quickly set up an environment for performing the benchmark.
The detailed steps reference: <a href="https://github.com/NetEase/lakehouse-benchmark/tree/master/docker/benchmark">Lakehouse-benchmark</a>.</p>
<h3 id="deploy-manually">Deploy manually</h3>
<p>Alternatively, you can manually deploy the following components to set up the test environmentï¼š</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Component</th>
          <th style="text-align: left">Version</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Installation Guide</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">MySQL</td>
          <td style="text-align: left">5.7+</td>
          <td style="text-align: left">MySQL is used to generate TPC-C data for synchronization to data lakes.</td>
          <td style="text-align: left"><a href="https://dev.mysql.com/doc/mysql-installation-excerpt/5.7/en/">MySQL Installation Guide</a></td>
      </tr>
      <tr>
          <td style="text-align: left">Hadoop</td>
          <td style="text-align: left">2.3.7+</td>
          <td style="text-align: left">Hadoop is used to provide the storage for data lakes.</td>
          <td style="text-align: left"><a href="https://ambari.apache.org/">Ambari</a></td>
      </tr>
      <tr>
          <td style="text-align: left">Trino</td>
          <td style="text-align: left">380</td>
          <td style="text-align: left">Trino is used to execute TPC-H queries for Iceberg and Mixed-Iceberg format tables.</td>
          <td style="text-align: left"><a href="https://trino.io/docs/current/installation/deployment.html">Trino Installation Guide</a></td>
      </tr>
      <tr>
          <td style="text-align: left">Amoro Trino Connector</td>
          <td style="text-align: left">0.4.0</td>
          <td style="text-align: left">To query Mixed-Iceberg Format tables in Trino, you need to install and configure the Amoro connector in Trino.</td>
          <td style="text-align: left"><a href="https://amoro.netease.com/docs/latest/trino/">Amoro Trino Connector</a></td>
      </tr>
      <tr>
          <td style="text-align: left">Iceberg Trino Connector</td>
          <td style="text-align: left">0.13.0</td>
          <td style="text-align: left">To query Iceberg Format tables in Trino, you need to install and configure the Iceberg connector in Trino.</td>
          <td style="text-align: left"><a href="https://trino.io/docs/current/connector/iceberg.html">Iceberg Trino Connector</a></td>
      </tr>
      <tr>
          <td style="text-align: left">Presto</td>
          <td style="text-align: left">274</td>
          <td style="text-align: left">Presto is used to execute TPC-H queries for Hudi format tables.</td>
          <td style="text-align: left"><a href="https://prestodb.io/docs/current/installation/deployment.html">Presto Installation Guide</a></td>
      </tr>
      <tr>
          <td style="text-align: left">Hudi Presto Connector</td>
          <td style="text-align: left">0.11.1</td>
          <td style="text-align: left">To query Iceberg Format tables in Trino, you need to install and configure the Iceberg connector in Presto.</td>
          <td style="text-align: left"><a href="https://prestodb.io/docs/current/connector/hudi.html">Hudi Presto Connector</a></td>
      </tr>
      <tr>
          <td style="text-align: left">AMS</td>
          <td style="text-align: left">0.4.0</td>
          <td style="text-align: left">Amoro Management Service, support self-optimizing on tables during the test.</td>
          <td style="text-align: left"><a href="https://amoro.netease.com/docs/latest/deployment/">AMS Installation Guide</a></td>
      </tr>
      <tr>
          <td style="text-align: left">data-lake-benchmark</td>
          <td style="text-align: left">21</td>
          <td style="text-align: left">The core program of Benchmark which is responsible for generating test data, executing the testing process, and generating test results.</td>
          <td style="text-align: left"><a href="https://github.com/NetEase/data-lake-benchmark#readme">Data Lake Benchmark</a></td>
      </tr>
      <tr>
          <td style="text-align: left">lakehouse-benchmark-ingestion</td>
          <td style="text-align: left">1.0</td>
          <td style="text-align: left">Data synchronization tool based on Flink-CDC which can synchronize data from  database to data lake in real-time.</td>
          <td style="text-align: left"><a href="https://github.com/NetEase/lakehouse-benchmark-ingestion">Lakehouse Benchmark Ingestion</a></td>
      </tr>
  </tbody>
</table>
<h2 id="benchmark-steps">Benchmark steps</h2>
<ol>
<li>
<p>Configure the configuration file <code>config/mysql/sample_chbenchmark_config.xml</code> file of program <code>data-lake-benchmark</code>. Fill in the information of MySQL and parameter <code>scalefactor</code>.  <code>scalefactor</code> represents the number of warehouses, which controls the overall data volume. Generally, choose 10 or 100.</p>
</li>
<li>
<p>Generate static data into MySQL with commandï¼š</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>java -jar lakehouse-benchmark.jar -b tpcc,chbenchmark -c config/mysql/sample_chbenchmark_config.xml --create<span style="color:#f92672">=</span>true --load<span style="color:#f92672">=</span>true
</span></span></code></pre></div><ol start="3">
<li>
<p>Configure the configuration file <code>config/ingestion-conf.yaml</code> file of program <code>lakehouse-benchmark-ingestion</code>. Fill in the information of MySQL.</p>
</li>
<li>
<p>Start the ingestion job to synchronize data form MySQL to data lake tables witch command:</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>java -cp lakehouse-benchmark-ingestion-1.0-SNAPSHOT.jar com.netease.arctic.benchmark.ingestion.MainRunner -confDir <span style="color:#f92672">[</span>confDir<span style="color:#f92672">]</span> -sinkType <span style="color:#f92672">[</span>arctic/iceberg/hudi<span style="color:#f92672">]</span> -sinkDatabase <span style="color:#f92672">[</span>dbName<span style="color:#f92672">]</span>
</span></span></code></pre></div><ol start="5">
<li>Execute TPC-H benchmark on static data with command:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>java -jar lakehouse-benchmark.jar -b chbenchmarkForTrino -c config/trino/trino_chbenchmark_config.xml --create<span style="color:#f92672">=</span>false --load<span style="color:#f92672">=</span>false --execute<span style="color:#f92672">=</span>true
</span></span></code></pre></div><ol start="6">
<li>Execute TPC-C program to continuously write data into MYSQL witch command:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>java -jar lakehouse-benchmark.jar -b tpcc,chbenchmark -c config/mysql/sample_chbenchmark_config.xml --execute<span style="color:#f92672">=</span>true -s <span style="color:#ae81ff">5</span>
</span></span></code></pre></div><ol start="7">
<li>Execute TPC-H benchmark on dynamic data with command:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>java -jar lakehouse-benchmark.jar -b chbenchmarkForTrino -c config/trino/trino_chbenchmark_config.xml --create<span style="color:#f92672">=</span>false --load<span style="color:#f92672">=</span>false --execute<span style="color:#f92672">=</span>true
</span></span></code></pre></div><ol start="8">
<li>
<p>Obtain the benchmark results in the <code>result</code> directory of the <code>data-lake-benchmark</code> project.</p>
</li>
<li>
<p>Repeat step 7 to obtain benchmark results for different points in time.</p>
</li>
</ol>
</div>
                
                    














<div id="toc" class="markdown-body">
    <div id="full">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#deploy-testing-environment">Deploy testing environment</a>
      <ul>
        <li><a href="#deploy-by-docker">Deploy by Docker</a></li>
        <li><a href="#deploy-manually">Deploy manually</a></li>
      </ul>
    </li>
    <li><a href="#benchmark-steps">Benchmark steps</a></li>
  </ul>
</nav>
    </div>
</div>

                
            </div>
        </div>
    </section>
</body>















<script src="https://amoro.apache.org//js/jquery-1.11.0.js"></script>


<script src="https://amoro.apache.org//js/jquery.easing.min.js"></script>


<script type="text/javascript" src="https://amoro.apache.org//js/search.js"></script>


<script src="https://amoro.apache.org//js/bootstrap.min.js"></script>


<script src="https://amoro.apache.org//js/iceberg-theme.js"></script>



</html>