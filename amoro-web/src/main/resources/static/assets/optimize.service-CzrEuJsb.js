
/*
  * Licensed to the Apache Software Foundation (ASF) under one
  * or more contributor license agreements.  See the NOTICE file
  * distributed with this work for additional information
  * regarding copyright ownership.  The ASF licenses this file
  * to you under the Apache License, Version 2.0 (the
  * "License"); you may not use this file except in compliance
  * with the License.  You may obtain a copy of the License at
  *
  *     http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */

import{d as j,U as F,ae as A,f as B,r as E,c as U,w as V,X as c,a0 as m,a3 as v,a6 as G,k as i,Y as f,F as L,aa as S,G as N,a2 as b,V as D,u as q}from"./vue-KZ6HWXOH.js";import{e as I,r as s}from"./index-C3lMfZSI.js";import{I as T,c as W,G as X,F as Y,B as H,p as J}from"./antd-CPSoav-4.js";const K={class:"config-properties"},M={key:0},Q={class:"config-header g-flex"},Z={class:"td g-flex-ac"},ee={class:"td g-flex-ac bd-left"},se=j({__name:"Properties",props:{propertiesObj:{},isEdit:{type:Boolean}},setup(e,{expose:r}){const o=e,{t:u}=F(),_=A([{dataIndex:"key",title:u("key"),width:284,ellipsis:!0},{dataIndex:"value",title:u("value"),ellipsis:!0}]),l=B(),a=E({data:[]}),g=[{required:!0,message:""}],h=U(()=>o.isEdit);V(()=>o.propertiesObj,()=>{P()},{immediate:!0,deep:!0});function P(){a.data.length=0,Object.keys(o.propertiesObj).forEach(t=>{a.data.push({key:t,value:o.propertiesObj[t],uuid:I()})})}function w(t){const n=a.data.indexOf(t);n!==-1&&a.data.splice(n,1)}function O(){a.data.push({key:"",value:"",uuid:I()})}return r({getPropertiesWithoputValidation(){const t={};return a.data.forEach(n=>{t[n.key]=n.value}),Promise.resolve(t)},getProperties(){return l.value.validateFields().then(()=>{const t={};return a.data.forEach(n=>{t[n.key]=n.value}),Promise.resolve(t)}).catch(()=>!1)}}),(t,n)=>{const z=T,k=W,R=X,C=Y,$=H,x=J;return c(),m("div",K,[h.value?(c(),m("div",M,[v("div",Q,[v("div",Z,G(t.$t("key")),1),v("div",ee,G(t.$t("value")),1)]),i(C,{ref_key:"propertiesFormRef",ref:l,layout:"inline",model:a,class:"g-mt-12"},{default:f(()=>[(c(!0),m(L,null,S(a.data,(p,y)=>(c(),m("div",{key:p.uuid,class:"config-row"},[i(k,{name:["data",y,"key"],rules:g},{default:f(()=>[i(z,{value:p.key,"onUpdate:value":d=>p.key=d,style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]),i(k,{name:["data",y,"value"],rules:g},{default:f(()=>[i(z,{value:p.value,"onUpdate:value":d=>p.value=d,style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]),i(R,{class:"icon-close",onClick:d=>w(p)},null,8,["onClick"])]))),128))]),_:1},8,["model"]),i($,{class:"config-btn",onClick:O},{default:f(()=>[N(" + ")]),_:1})])):b("",!0),h.value?b("",!0):(c(),D(x,{key:1,"row-key":"uuid",columns:q(_),"data-source":a.data,pagination:!1},null,8,["columns","data-source"]))])}}});function re(e){const{optimizerGroup:r,dbSearchInput:o,tableSearchInput:u,page:_,pageSize:l}=e;return s.get(`ams/v1/optimize/optimizerGroups/${r}/tables`,{params:{dbSearchInput:o,tableSearchInput:u,page:_,pageSize:l}})}function ne(e){const{optimizerGroup:r,page:o,pageSize:u}=e;return s.get(`ams/v1/optimize/optimizerGroups/${r}/optimizers`,{params:{page:o,pageSize:u}})}function ie(e){const{optimizerGroup:r,parallelism:o}=e;return s.post(`ams/v1/optimize/optimizerGroups/${r}/optimizers`,{parallelism:o})}function ue(e){const{optimizerGroup:r,jobId:o}=e;return s.delete(`ams/v1/optimize/optimizerGroups/${r}/optimizers/${o}`)}async function pe(){return await s.get("ams/v1/optimize/resourceGroups")}async function ce(){return await s.get("ams/v1/optimize/containers/get")}function le(e){return s.post("ams/v1/optimize/resourceGroups",e)}function de(e){return s.put("ams/v1/optimize/resourceGroups",e)}function me(e){return s.get(`/ams/v1/optimize/resourceGroups/${e.name}/delete/check`)}function fe(e){return s.delete(`/ams/v1/optimize/resourceGroups/${e.name}`)}export{se as _,re as a,ne as b,me as c,fe as d,ce as e,le as f,pe as g,ue as r,ie as s,de as u};
